import AuditReportLayout from '@/components/layouts/audit-report';

## 6. Systemic risks

### 6.1 Malformed data

The main concern would be poor formatting of the input data for the delegation process, as described in **4.2**.

This would, due to the accurate definition in the contract, in any case, **revert if the data is incorrect**, or do some **reversible non-significant damages**. Meaning, delegating **too much/too few tokens**, **withdrawing them by mistake** or **transferring them from/to an incorrect delegate**; any of this, if easily accessible on a user-friendly interface, would be **easily noticed and fixed without any significant threat**.

### 6.2 Dependencies versions

There are questions concerning the outdated versions of contracts, used in the provided repository, and which versions will be used for deployment.

It is even more unclear whether the versions from the audit package or the latest ones will be utilized, as the contracts referenced in the ENS documentation are deployed using the most recent versions.

This is especially true for packages related to @ensdomains and @openzeppelin, given the huge gap between versions. See in `package.json`:

```json
"dependencies": {
   // 2 years old, latest is 0.0.22 as of 2023-10-11
   "@ensdomains/ens-contracts": "^0.0.7",
   // 2 years old, latest is 5.0.0 as of 2023-10-11
   "@openzeppelin/contracts": "^4.3.1",
   // ...
 },
```

Just a specific example, [the `PublicResolver` contract deployed in tests](https://github.com/code-423n4/2023-10-ens/blob/main/test/delegatemulti.js#L110) takes two parameters in the older version (the `ENS` and `INameWrapper` contract/interface), whereas the latest one takes four parameters (the same + addresses for a trusted ETH controller and a trusted reverse registrar).

In any case, the audit is intended to cover such cases, regardless if the version is 0.0.7 or above (as it is actually indicated). The point highlighted is the potential benefit of clearly defining the versions of dependencies intended for deployment, as late as possible, and the **possibility of introducing new vulnerabilities in the case of an upgrade _after_ the audit is completed**.

export default (props) => (
  <AuditReportLayout selected="systemic-risks" slug="2023-10-ens" {...props} />
);
